<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 420" font-family="sans-serif">
  <defs>
    <marker id="a" markerWidth="10" markerHeight="8" refX="6" refY="4" orient="auto" markerUnits="userSpaceOnUse">
      <path d="M0,0 L10,4 L0,8 Z" fill="#aaa"/>
    </marker>
  </defs>

  <!-- Input: x=10, y=100, w=100, h=50, center_y=125 -->
  <rect x="10" y="100" width="100" height="50" rx="10" fill="#8b5cf6"/>
  <text x="60" y="117" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="13" font-weight="bold">Input</text>
  <text x="60" y="133" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">"cat sat mat"</text>

  <!-- Arrow to Q/K/V split -->
  <line x1="118" y1="125" x2="148" y2="125" stroke="#aaa" stroke-width="2" marker-end="url(#a)"/>

  <!-- Q/K/V Projection: x=156, y=60, w=110, h=130 -->
  <rect x="156" y="60" width="110" height="130" rx="10" fill="#4a9eff"/>
  <text x="211" y="78" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="13" font-weight="bold">Linear Projection</text>
  <line x1="170" y1="95" x2="252" y2="95" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
  <!-- Content area: y=95–190, center=142.5, spacing=22 -->
  <text x="211" y="121" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="14">Q <tspan font-size="10" fill="#ddd">(Query)</tspan></text>
  <text x="211" y="143" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="14">K <tspan font-size="10" fill="#ddd">(Key)</tspan></text>
  <text x="211" y="165" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="14">V <tspan font-size="10" fill="#ddd">(Value)</tspan></text>

  <!-- Arrow to Dot Product -->
  <line x1="274" y1="125" x2="304" y2="125" stroke="#aaa" stroke-width="2" marker-end="url(#a)"/>

  <!-- Dot Product: x=312, y=85, w=110, h=80, center_y=125, spacing=18 -->
  <rect x="312" y="85" width="110" height="80" rx="10" fill="#4a9eff"/>
  <text x="367" y="107" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="13" font-weight="bold">Dot Product</text>
  <text x="367" y="125" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="12">Q · K&#x1D40;</text>
  <text x="367" y="143" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="10">relevance scores</text>

  <!-- Arrow to Scale -->
  <line x1="430" y1="125" x2="460" y2="125" stroke="#aaa" stroke-width="2" marker-end="url(#a)"/>

  <!-- Scale: x=468, y=85, w=100, h=80, center_y=125, spacing=18 -->
  <rect x="468" y="85" width="100" height="80" rx="10" fill="#5dbe8a"/>
  <text x="518" y="107" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="13" font-weight="bold">Scale</text>
  <text x="518" y="125" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="14">÷ √d</text>
  <text x="518" y="143" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="10">prevent overflow</text>

  <!-- Arrow to Softmax -->
  <line x1="576" y1="125" x2="606" y2="125" stroke="#aaa" stroke-width="2" marker-end="url(#a)"/>

  <!-- Softmax: x=614, y=85, w=100, h=80, center_y=125, spacing=18 -->
  <rect x="614" y="85" width="100" height="80" rx="10" fill="#e85d5d"/>
  <text x="664" y="107" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="13" font-weight="bold">Softmax</text>
  <text x="664" y="125" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">to percentages</text>
  <text x="664" y="143" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="10">sum = 100%</text>

  <!-- Arrow to Weighted Sum -->
  <line x1="722" y1="125" x2="752" y2="125" stroke="#aaa" stroke-width="2" marker-end="url(#a)"/>

  <!-- Weighted Sum: x=760, y=85, w=90, h=80, center_y=125, spacing=18 -->
  <rect x="760" y="85" width="90" height="80" rx="10" fill="#5dbe8a"/>
  <text x="805" y="107" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="12" font-weight="bold">Weighted Sum</text>
  <text x="805" y="125" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="13">× V</text>
  <text x="805" y="143" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="10">blend by weight</text>

  <!-- Formula bar -->
  <text x="430" y="220" text-anchor="middle" dominant-baseline="central" fill="#aaa" font-size="14" font-weight="bold">Attention(Q, K, V) = softmax(Q·K&#x1D40; / √d) · V</text>

  <!-- Legend: y=260, h=16, center_y=268 -->
  <rect x="190" y="260" width="16" height="16" rx="3" fill="#8b5cf6"/>
  <text x="214" y="268" dominant-baseline="central" fill="#aaa" font-size="12">Data</text>
  <rect x="270" y="260" width="16" height="16" rx="3" fill="#4a9eff"/>
  <text x="294" y="268" dominant-baseline="central" fill="#aaa" font-size="12">Computation</text>
  <rect x="400" y="260" width="16" height="16" rx="3" fill="#5dbe8a"/>
  <text x="424" y="268" dominant-baseline="central" fill="#aaa" font-size="12">Scale / Output</text>
  <rect x="540" y="260" width="16" height="16" rx="3" fill="#e85d5d"/>
  <text x="564" y="268" dominant-baseline="central" fill="#aaa" font-size="12">Normalization</text>

  <!-- Example numbers -->
  <text x="430" y="310" text-anchor="middle" dominant-baseline="central" fill="#aaa" font-size="13">Example: "cat" attention weights to each token</text>

  <!-- Example tokens: y=330, h=40, center_y=350, spacing=16 -->
  <rect x="155" y="330" width="70" height="40" rx="8" fill="#4a9eff"/>
  <text x="190" y="342" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="12" font-weight="bold">cat</text>
  <text x="190" y="358" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">12%</text>

  <rect x="255" y="330" width="70" height="40" rx="8" fill="#e85d5d"/>
  <text x="290" y="342" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="12" font-weight="bold">sat</text>
  <text x="290" y="358" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">69%</text>

  <rect x="355" y="330" width="70" height="40" rx="8" fill="#4a9eff"/>
  <text x="390" y="342" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="12" font-weight="bold">on</text>
  <text x="390" y="358" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">8%</text>

  <rect x="455" y="330" width="70" height="40" rx="8" fill="#4a9eff"/>
  <text x="490" y="342" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="12" font-weight="bold">the</text>
  <text x="490" y="358" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">7%</text>

  <rect x="555" y="330" width="70" height="40" rx="8" fill="#4a9eff"/>
  <text x="590" y="342" text-anchor="middle" dominant-baseline="central" fill="#fff" font-size="12" font-weight="bold">mat</text>
  <text x="590" y="358" text-anchor="middle" dominant-baseline="central" fill="#ddd" font-size="11">4%</text>

  <text x="430" y="400" text-anchor="middle" dominant-baseline="central" fill="#aaa" font-size="11">"cat" pays most attention to "sat" — it wants to know what it's doing</text>
</svg>
