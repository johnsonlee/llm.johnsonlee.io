<!-- .slide: class="center" -->

## 10. 智能体与工具使用

*AI 能不能像人一样使用工具？*

----

## 问题：AI 被困在了对话框里

现在的大语言模型只会读写文字，可是现实中的任务往往需要 **动手** ：

- “帮我订张机票” → 得上网搜航班、填表、付款
- “帮我修好这段程序” → 得运行程序、看哪里出了错、试着修
- “今天天气怎么样？” → 得调用天气 API

> 如果 AI 也能 **使用工具** ——搜索引擎、计算器、各种 API——会怎样？

----

## Toolformer：自学成才

与其一个个告诉大语言模型什么时候该用什么工具，不如让它 **自己琢磨** ：

1. 先给大语言模型看一些调用工具的例子
2. 让它自行在训练数据里插入工具调用
3. 只保留那些确实 **提升了预测效果** 的调用

大语言模型慢慢就学会了什么时候该用哪个工具、怎么用。

> [Toolformer](https://arxiv.org/abs/2302.04761)（2023）— 让大语言模型自己学会用工具

----

## 大语言模型能学会使用哪些工具？

Toolformer 自学掌握了这些工具：

- **计算器** ：“593 × 217 等于多少？” → [CALC(593 * 217)] → 128,681
- **搜索引擎** ：“2022 年世界杯冠军是谁？” → [SEARCH(2022 世界杯冠军)] → 阿根廷
- **日历** ：“1 月 1 日往后 90 天是几号？” → [CALENDAR(+90天)] → 4 月 1 日
- **翻译器** ：“'你好'用日语怎么说？” → [TRANSLATE(你好, ja)] → こんにちは

大语言模型自己判断 *什么时候* 需要工具、该用 *哪个* 工具——全是自学的！

----

## Voyager：在 Minecraft 里学习新技能的 AI

如果一个 AI 智能体能在开放世界里自由探索、不断学新本领呢？

Voyager 玩 Minecraft 靠的是三板斧：

- **自己定目标** ：“先砍树，再盖房子”
- **技能库** ：学会的技能存成代码，下次直接复用
- **沙盒验证** ：新技能先在安全环境里试跑，没问题再正式上场

> [Voyager](https://arxiv.org/abs/2305.16291)（2023）— 会自主探索学习的 AI 智能体

----

## Voyager 为什么特别

大多数 AI 智能体按照固定脚本行动。Voyager 不一样：

- 它在游戏中 **自己发明新技能** ——没人教它怎么搭桥
- 学会的技能会被存成 **可复用的代码** ——“我会炼铁”就永久保存了
- 每个新技能都建立在已有技能之上——就像你的学习过程：爬 → 走 → 跑 → 跳舞

这是第一个真正通过 **探索来学习** 的 AI，而不只是按指令执行。

----

## MemGPT：给 AI 装上长期记忆

AI 聊着聊着就会把前面说过的话忘了，因为对话窗口有上限。

MemGPT 借鉴了操作系统管理内存的思路：

- **主内存** ：当前正在聊的内容（速度快，容量有限）
- **外部存储** ：以前聊过的对话、看过的文档（容量大，但调取慢一些）
- AI 自己决定什么时候该 **存档** 、什么时候该 **读档**

就像你随口就能说出好朋友的名字，但要查电话号码得翻通讯录。

> [MemGPT](https://arxiv.org/abs/2310.08560)（2023）— 把操作系统的内存管理搬给 AI

----

## 怎么考核 AI 智能体？

想知道智能体到底行不行，得有够硬的考题：

- **SWE-Bench** ：让智能体去修 GitHub 上的 **真实 bug**
- 不是编出来的小练习，而是实际项目里的真实代码和测试
- 大部分 AI 每 100 个 bug 只能修好不到 5 个——难度确实大

> [SWE-Bench](https://arxiv.org/abs/2310.06770)（2023）— 编码智能体的实战考场

----

## SWE-Agent：给智能体设计顺手的工具

也许智能体表现不好，不是因为 AI 不够聪明，而是因为 **交互界面** 没设计好：

- 人类开发者有 IDE、有搜索、有语法高亮
- 智能体也应该有类似的工具：文件导航、代码浏览、错误解析
- 关键是要为 **智能体的使用习惯** 来设计界面

> [SWE-Agent](https://arxiv.org/abs/2405.15793)（2024）— 好的界面设计能显著提升智能体表现

----

## 构建智能体的常用模式

该怎么设计一个 AI 智能体的架构？Anthropic 总结了几种实用模式：

- **链式调用** ：把复杂任务拆成若干步骤，前一步的输出喂给后一步
- **路由分发** ：根据任务类型派给不同的“专家”处理
- **并行执行** ：彼此独立的子任务同时跑
- **编排协调** ：一个“总指挥”智能体调度多个“干活”智能体

> [Building Effective Agents](https://www.anthropic.com/research/building-effective-agents)（2024）— 实战总结的智能体架构模式

----

## 生活中的智能体模式

这些智能体模式不只是 AI 在用——你每天都在用！

- **链式调用** ：做三明治 → 拿面包 → 加食材 → 合上 → 切开。每一步的结果喂给下一步。
- **路由分发** ：写作业 → 数学题交给你的“数学脑”，作文交给你的“写作脑”
- **并行执行** ：一边下载文件一边读文章——两件事同时干
- **编排协调** ：小组作业——组长给每个人分任务，最后汇总结果

AI 智能体组织工作的方式，跟我们日常生活一模一样！

----

## 生成式智能体：一座虚拟小镇

让 25 个 AI 智能体住在一个虚拟小镇里，会发生什么？

- 每个智能体都有自己的 **记忆、性格和作息**
- 它们会交朋友、传八卦、组织聚会
- 涌现出了丰富的社交行为——一切自然浮现

> [Generative Agents (Smallville)](https://arxiv.org/abs/2304.03442)（2023）— AI 社会模拟实验

----

## 第 10 章总结

| 论文 | 核心思想 |
|------|----------|
| [Toolformer](https://arxiv.org/abs/2302.04761)（2023） | 大语言模型自学使用工具 |
| [Voyager](https://arxiv.org/abs/2305.16291)（2023） | 在 Minecraft 里自主探索的智能体 |
| [MemGPT](https://arxiv.org/abs/2310.08560)（2023） | 仿操作系统的长期记忆管理 |
| [SWE-Bench](https://arxiv.org/abs/2310.06770)（2023） | 真实 GitHub bug 实战考核 |
| [SWE-Agent](https://arxiv.org/abs/2405.15793)（2024） | 为智能体量身定制交互界面 |
| [Building Agents](https://www.anthropic.com/research/building-effective-agents)（2024） | 实用的智能体架构模式 |
| [Smallville](https://arxiv.org/abs/2304.03442)（2023） | 25 个 AI 智能体组成的虚拟社会 |

----

## 想深入了解？

- [Building Effective Agents (Anthropic)](https://www.anthropic.com/research/building-effective-agents) — Anthropic 总结的实用智能体模式
- [Voyager Paper Explained](https://www.youtube.com/watch?v=u3ynhTkSJKE) — AI 是怎么学会玩 Minecraft 的（视频）
- [Generative Agents: Interactive Simulacra](https://reverie.herokuapp.com/arXiv_Demo/) — 在线探索 AI 智能体组成的虚拟小镇
- [SWE-Bench Leaderboard](https://www.swebench.com/) — 看看哪个 AI 智能体最擅长修 bug

----

## 想一想

- AI 智能体能学会使用搜索引擎、计算器等工具。你最希望 AI 学会使用什么工具？为什么？
- Voyager 把技能存成代码以便复用。这跟你在学习中“把之前学过的东西拿来用”有什么相似之处？
- Smallville 实验中，AI 智能体会交朋友、办聚会。你觉得 AI 能真正拥有“社交”行为，还是只在模仿模式？
- SWE-Bench 显示 AI 智能体只能修好约 5% 的真实 bug。为什么你觉得现实世界的编程比练习题难这么多？
